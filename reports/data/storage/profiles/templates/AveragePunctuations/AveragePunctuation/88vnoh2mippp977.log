{"type":"operationStart","subtype":"profile","data":{"_id":"TMVLJ18sbnC1BoXq","timestamp":"2024-01-11T15:42:17.709Z","state":"queued","mode":"standard","creationDate":"2024-01-11T15:42:17.712Z","modificationDate":"2024-01-11T15:42:17.712Z","shortid":"9218rpK","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704987737710,"id":"7ovl37hq90jo2vs","previousOperationId":null,"operationId":"ktr96s9ah3efc5l"}
{"type":"log","level":"info","message":"Render request 2 queued for execution and waiting for available worker","previousOperationId":"ktr96s9ah3efc5l","timestamp":1704987737711,"id":"41llt5cpo3j3bvm"}
{"type":"operationStart","subtype":"render","name":"AveragePunctuation","previousOperationId":"ktr96s9ah3efc5l","timestamp":1704987737723,"id":"uaabkx9mooi5sbp","previousEventId":"7ovl37hq90jo2vs","operationId":"n2y4oijrrj03nkw"}
{"type":"log","timestamp":1704987737724,"level":"info","message":"Starting rendering request 2","meta":{"rootId":"88vnoh2mippp977","id":"88vnoh2mippp977"},"id":"tybevdqyxdc4tmx","previousOperationId":"n2y4oijrrj03nkw"}
{"type":"log","timestamp":1704987737727,"level":"info","message":"Rendering template { name: AveragePunctuation, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"88vnoh2mippp977","id":"88vnoh2mippp977"},"id":"b3wsiazk28n17yo","previousOperationId":"n2y4oijrrj03nkw"}
{"type":"log","timestamp":1704987737729,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"88vnoh2mippp977","id":"88vnoh2mippp977"},"id":"gw9hvq6dyzdntd6","previousOperationId":"n2y4oijrrj03nkw"}
{"type":"log","timestamp":1704987737733,"level":"debug","message":"Executing script AveragePunctuation-script (beforeRender)","meta":{"rootId":"88vnoh2mippp977","id":"88vnoh2mippp977"},"id":"y3fc12zslf3z4ao","previousOperationId":"n2y4oijrrj03nkw"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704987738119,"id":"rja21bgcwfvl50i","previousEventId":"uaabkx9mooi5sbp","operationId":"f4rbe2hxzgyusmo","previousOperationId":"n2y4oijrrj03nkw"}
{"type":"operationStart","subtype":"script","name":"scripts AveragePunctuation-script","previousOperationId":"f4rbe2hxzgyusmo","timestamp":1704987738119,"id":"9qx4a8ubse36luh","previousEventId":"rja21bgcwfvl50i","operationId":"ncpiak2jdrvvf5l"}
{"type":"log","timestamp":1704987738126,"level":"warn","message":"Error when processing render request 2\n(because) error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nProtocol \"https:\" not supported. Expected \"http:\"\n\n(sandbox.js line 8:14)\n\n   6 | function fetchPunctuationsOfUser(userId) {\n   7 |     return new Promise((resolve, reject) => {\n>  8 |         http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n     |              ^\n   9 |             (result) => {\n  10 |                 var str = '';\n  11 |                 result.on('data', (b) => str += b);\n\n(sandbox.js line 7:12)\n\n   5 | // call remote http rest api\n   6 | function fetchPunctuationsOfUser(userId) {\n>  7 |     return new Promise((resolve, reject) => {\n     |            ^\n   8 |         http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n   9 |             (result) => {\n  10 |                 var str = '';\n\n(sandbox.js line 20:35)\n\n  18 | // add jsreport hook which modifies the report input data\n  19 | async function beforeRender(req, res) {\n> 20 |     req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n     |                                   ^\n  21 |     req.data.orders = await prepareDataSource()\n  22 | }\n\n(sandbox.js line 34:18)\nTypeError [ERR_INVALID_PROTOCOL]: Protocol \"https:\" not supported. Expected \"http:\"\n    at new NodeError (node:internal/errors:405:5)\n    at new ClientRequest (node:_http_client:188:11)\n    at request (node:http:100:10)\n    at Object.get (node:http:111:15)\n    at sandbox.js:8:14\n    at new Promise (<anonymous>)\n    at fetchPunctuationsOfUser (sandbox.js:7:12)\n    at Object.beforeRender (sandbox.js:20:35)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:35)\n    at sandbox.js:34:18","meta":{"rootId":"88vnoh2mippp977","id":"88vnoh2mippp977"},"id":"czsvppw8u4h98fo","previousOperationId":"ncpiak2jdrvvf5l"}
{"type":"log","timestamp":1704987738126,"level":"warn","message":"Rendering request 2 finished with error in 417 ms","meta":{"rootId":"88vnoh2mippp977","id":"88vnoh2mippp977"},"id":"ipfyqk66jbgsozn","previousOperationId":"ncpiak2jdrvvf5l"}
{"type":"error","timestamp":1704987738129,"code":"ERR_INVALID_PROTOCOL","statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 8:14)\n\n   6 | function fetchPunctuationsOfUser(userId) {\n   7 |     return new Promise((resolve, reject) => {\n>  8 |         http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n     |              ^\n   9 |             (result) => {\n  10 |                 var str = '';\n  11 |                 result.on('data', (b) => str += b);\n\n(sandbox.js line 7:12)\n\n   5 | // call remote http rest api\n   6 | function fetchPunctuationsOfUser(userId) {\n>  7 |     return new Promise((resolve, reject) => {\n     |            ^\n   8 |         http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n   9 |             (result) => {\n  10 |                 var str = '';\n\n(sandbox.js line 20:35)\n\n  18 | // add jsreport hook which modifies the report input data\n  19 | async function beforeRender(req, res) {\n> 20 |     req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n     |                                   ^\n  21 |     req.data.orders = await prepareDataSource()\n  22 | }\n\n(sandbox.js line 34:18)","entity":{"shortid":"LWX1OfaBwy","name":"AveragePunctuation-script","content":"// server side script fetching remote data and preparing report data source\nconst http = require('http');\nconst jwt = require('jsonwebtoken');\n\n// call remote http rest api\nfunction fetchPunctuationsOfUser(userId) {\n    return new Promise((resolve, reject) => {\n        http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n            (result) => {\n                var str = '';\n                result.on('data', (b) => str += b);\n                result.on('error', reject);\n                result.on('end', () => resolve(JSON.parse(str).value));\n            });\n    })\n}\n\n// add jsreport hook which modifies the report input data\nasync function beforeRender(req, res) {\n    req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n    req.data.orders = await prepareDataSource()\n}"},"property":"content","logged":true,"previousOperationId":"ncpiak2jdrvvf5l","id":"33uqoiao7dmr8xr","stack":"TypeError [ERR_INVALID_PROTOCOL]: Protocol \"https:\" not supported. Expected \"http:\"\n    at new NodeError (node:internal/errors:405:5)\n    at new ClientRequest (node:_http_client:188:11)\n    at request (node:http:100:10)\n    at Object.get (node:http:111:15)\n    at sandbox.js:8:14\n    at new Promise (<anonymous>)\n    at fetchPunctuationsOfUser (sandbox.js:7:12)\n    at Object.beforeRender (sandbox.js:20:35)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:35)\n    at sandbox.js:34:18","message":"Error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nProtocol \"https:\" not supported. Expected \"http:\"\n\n(sandbox.js line 8:14)\n\n   6 | function fetchPunctuationsOfUser(userId) {\n   7 |     return new Promise((resolve, reject) => {\n>  8 |         http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n     |              ^\n   9 |             (result) => {\n  10 |                 var str = '';\n  11 |                 result.on('data', (b) => str += b);\n\n(sandbox.js line 7:12)\n\n   5 | // call remote http rest api\n   6 | function fetchPunctuationsOfUser(userId) {\n>  7 |     return new Promise((resolve, reject) => {\n     |            ^\n   8 |         http.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n   9 |             (result) => {\n  10 |                 var str = '';\n\n(sandbox.js line 20:35)\n\n  18 | // add jsreport hook which modifies the report input data\n  19 | async function beforeRender(req, res) {\n> 20 |     req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n     |                                   ^\n  21 |     req.data.orders = await prepareDataSource()\n  22 | }\n\n(sandbox.js line 34:18)"}
