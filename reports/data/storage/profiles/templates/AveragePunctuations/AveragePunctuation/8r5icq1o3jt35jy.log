{"type":"operationStart","subtype":"profile","data":{"_id":"ca6fEG7zns6nVbGE","timestamp":"2024-01-11T15:42:11.216Z","state":"queued","mode":"standard","creationDate":"2024-01-11T15:42:11.221Z","modificationDate":"2024-01-11T15:42:11.221Z","shortid":"Kq25oiE","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704987731218,"id":"c7bgflppemih9q6","previousOperationId":null,"operationId":"onouxnznclkm9qe"}
{"type":"log","level":"info","message":"Render request 1 queued for execution and waiting for available worker","previousOperationId":"onouxnznclkm9qe","timestamp":1704987731219,"id":"hr46cxrbxq2esln"}
{"type":"operationStart","subtype":"render","name":"AveragePunctuation","previousOperationId":"onouxnznclkm9qe","timestamp":1704987731265,"id":"cl1nxtkdtsk7e44","previousEventId":"c7bgflppemih9q6","operationId":"mystqqpne228mi0"}
{"type":"log","timestamp":1704987731270,"level":"info","message":"Starting rendering request 1","meta":{"rootId":"8r5icq1o3jt35jy","id":"8r5icq1o3jt35jy"},"id":"kw9q5iavlgu340r","previousOperationId":"mystqqpne228mi0"}
{"type":"log","timestamp":1704987731272,"level":"info","message":"Rendering template { name: AveragePunctuation, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"8r5icq1o3jt35jy","id":"8r5icq1o3jt35jy"},"id":"jht26bua27yyw9r","previousOperationId":"mystqqpne228mi0"}
{"type":"log","timestamp":1704987731276,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"8r5icq1o3jt35jy","id":"8r5icq1o3jt35jy"},"id":"xdt5w3kwdbs60xj","previousOperationId":"mystqqpne228mi0"}
{"type":"log","timestamp":1704987731282,"level":"debug","message":"Executing script AveragePunctuation-script (beforeRender)","meta":{"rootId":"8r5icq1o3jt35jy","id":"8r5icq1o3jt35jy"},"id":"1lq8tp5qx593ixs","previousOperationId":"mystqqpne228mi0"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704987731749,"id":"624m8dnuguxvku8","previousEventId":"cl1nxtkdtsk7e44","operationId":"m8ufpap541342ql","previousOperationId":"mystqqpne228mi0"}
{"type":"operationStart","subtype":"script","name":"scripts AveragePunctuation-script","previousOperationId":"m8ufpap541342ql","timestamp":1704987731749,"id":"lsa6o3e57caeegx","previousEventId":"624m8dnuguxvku8","operationId":"fn5cjdmty52h02c"}
{"type":"log","timestamp":1704987731757,"level":"warn","message":"Error when processing render request 1\n(because) error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nhttps is not defined\n\n(sandbox.js line 8:9)\n\n   6 | function fetchPunctuationsOfUser(userId) {\n   7 |     return new Promise((resolve, reject) => {\n>  8 |         https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n     |         ^\n   9 |             (result) => {\n  10 |                 var str = '';\n  11 |                 result.on('data', (b) => str += b);\n\n(sandbox.js line 7:12)\n\n   5 | // call remote http rest api\n   6 | function fetchPunctuationsOfUser(userId) {\n>  7 |     return new Promise((resolve, reject) => {\n     |            ^\n   8 |         https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n   9 |             (result) => {\n  10 |                 var str = '';\n\n(sandbox.js line 20:35)\n\n  18 | // add jsreport hook which modifies the report input data\n  19 | async function beforeRender(req, res) {\n> 20 |     req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n     |                                   ^\n  21 |     req.data.orders = await prepareDataSource()\n  22 | }\n\n(sandbox.js line 34:18)\nReferenceError: https is not defined\n    at sandbox.js:8:9\n    at new Promise (<anonymous>)\n    at fetchPunctuationsOfUser (sandbox.js:7:12)\n    at Object.beforeRender (sandbox.js:20:35)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:35)\n    at sandbox.js:34:18\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)","meta":{"rootId":"8r5icq1o3jt35jy","id":"8r5icq1o3jt35jy"},"id":"xu5ug3q8a252qtq","previousOperationId":"fn5cjdmty52h02c"}
{"type":"log","timestamp":1704987731757,"level":"warn","message":"Rendering request 1 finished with error in 541 ms","meta":{"rootId":"8r5icq1o3jt35jy","id":"8r5icq1o3jt35jy"},"id":"pnpk83cfr0zgkfm","previousOperationId":"fn5cjdmty52h02c"}
{"type":"error","timestamp":1704987731761,"statusCode":400,"weak":true,"lineNumber":8,"decoratedSuffix":"\n\n(sandbox.js line 8:9)\n\n   6 | function fetchPunctuationsOfUser(userId) {\n   7 |     return new Promise((resolve, reject) => {\n>  8 |         https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n     |         ^\n   9 |             (result) => {\n  10 |                 var str = '';\n  11 |                 result.on('data', (b) => str += b);\n\n(sandbox.js line 7:12)\n\n   5 | // call remote http rest api\n   6 | function fetchPunctuationsOfUser(userId) {\n>  7 |     return new Promise((resolve, reject) => {\n     |            ^\n   8 |         https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n   9 |             (result) => {\n  10 |                 var str = '';\n\n(sandbox.js line 20:35)\n\n  18 | // add jsreport hook which modifies the report input data\n  19 | async function beforeRender(req, res) {\n> 20 |     req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n     |                                   ^\n  21 |     req.data.orders = await prepareDataSource()\n  22 | }\n\n(sandbox.js line 34:18)","entity":{"shortid":"LWX1OfaBwy","name":"AveragePunctuation-script","content":"// server side script fetching remote data and preparing report data source\nconst http = require('http');\nconst jwt = require('jsonwebtoken');\n\n// call remote http rest api\nfunction fetchPunctuationsOfUser(userId) {\n    return new Promise((resolve, reject) => {\n        https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n            (result) => {\n                var str = '';\n                result.on('data', (b) => str += b);\n                result.on('error', reject);\n                result.on('end', () => resolve(JSON.parse(str).value));\n            });\n    })\n}\n\n// add jsreport hook which modifies the report input data\nasync function beforeRender(req, res) {\n    req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n    req.data.orders = await prepareDataSource()\n}"},"property":"content","logged":true,"previousOperationId":"fn5cjdmty52h02c","id":"trexdmws81xsm3m","stack":"ReferenceError: https is not defined\n    at sandbox.js:8:9\n    at new Promise (<anonymous>)\n    at fetchPunctuationsOfUser (sandbox.js:7:12)\n    at Object.beforeRender (sandbox.js:20:35)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:67:35)\n    at sandbox.js:34:18\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)","message":"Error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nhttps is not defined\n\n(sandbox.js line 8:9)\n\n   6 | function fetchPunctuationsOfUser(userId) {\n   7 |     return new Promise((resolve, reject) => {\n>  8 |         https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n     |         ^\n   9 |             (result) => {\n  10 |                 var str = '';\n  11 |                 result.on('data', (b) => str += b);\n\n(sandbox.js line 7:12)\n\n   5 | // call remote http rest api\n   6 | function fetchPunctuationsOfUser(userId) {\n>  7 |     return new Promise((resolve, reject) => {\n     |            ^\n   8 |         https.get('https://services.odata.org/V4/Northwind/Northwind.svc/Orders',\n   9 |             (result) => {\n  10 |                 var str = '';\n\n(sandbox.js line 20:35)\n\n  18 | // add jsreport hook which modifies the report input data\n  19 | async function beforeRender(req, res) {\n> 20 |     req.data.punctuations = await fetchPunctuationsOfUser(req.data.user);\n     |                                   ^\n  21 |     req.data.orders = await prepareDataSource()\n  22 | }\n\n(sandbox.js line 34:18)"}
