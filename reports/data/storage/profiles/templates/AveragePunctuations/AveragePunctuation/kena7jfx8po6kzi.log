{"type":"operationStart","subtype":"profile","data":{"_id":"vJcQnsThyIo9dvDv","timestamp":"2024-01-12T19:39:35.147Z","state":"queued","mode":"standard","creationDate":"2024-01-12T19:39:35.149Z","modificationDate":"2024-01-12T19:39:35.149Z","shortid":"nf0t0wk","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705088375149,"id":"ldy2kkifomq33vg","previousOperationId":null,"operationId":"ix1fxofdu58wni6"}
{"type":"log","level":"info","message":"Render request 2 queued for execution and waiting for available worker","previousOperationId":"ix1fxofdu58wni6","timestamp":1705088375149,"id":"y3ebo4ozkzimmp9"}
{"type":"operationStart","subtype":"render","name":"AveragePunctuation","previousOperationId":"ix1fxofdu58wni6","timestamp":1705088375156,"id":"v9ivsjek049lu7o","previousEventId":"ldy2kkifomq33vg","operationId":"4bgguybv07wv2ty"}
{"type":"log","timestamp":1705088375157,"level":"info","message":"Starting rendering request 2","meta":{"rootId":"kena7jfx8po6kzi","id":"kena7jfx8po6kzi"},"id":"r6c7sw8v2dyckjf","previousOperationId":"4bgguybv07wv2ty"}
{"type":"log","timestamp":1705088375157,"level":"info","message":"Rendering template { name: AveragePunctuation, recipe: chrome-pdf, engine: handlebars, preview: false }","meta":{"rootId":"kena7jfx8po6kzi","id":"kena7jfx8po6kzi"},"id":"ur3u4086onrw76z","previousOperationId":"4bgguybv07wv2ty"}
{"type":"log","timestamp":1705088375159,"level":"debug","message":"Inline data specified.","meta":{"rootId":"kena7jfx8po6kzi","id":"kena7jfx8po6kzi"},"id":"snfvw0monrqs9gb","previousOperationId":"4bgguybv07wv2ty"}
{"type":"log","timestamp":1705088375161,"level":"debug","message":"Executing script AveragePunctuation-script (beforeRender)","meta":{"rootId":"kena7jfx8po6kzi","id":"kena7jfx8po6kzi"},"id":"xkre2szeczfklj1","previousOperationId":"4bgguybv07wv2ty"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1705088375463,"id":"vxzs2ej6ezh0vb7","previousEventId":"v9ivsjek049lu7o","operationId":"rz6op16ih34ajj7","previousOperationId":"4bgguybv07wv2ty"}
{"type":"operationStart","subtype":"script","name":"scripts AveragePunctuation-script","previousOperationId":"rz6op16ih34ajj7","timestamp":1705088375463,"id":"p9vquqvy42s7aci","previousEventId":"vxzs2ej6ezh0vb7","operationId":"ms3ha4lcbh13t5o"}
{"type":"log","timestamp":1705088375504,"level":"warn","message":"Error when processing render request 2\n(because) error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nRequest failed with status code 404\nError: Request failed with status code 404\n    at normalizeError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\normalizeError.js:24:18)\n    at handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:207:18)\n    at context.__handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:33:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)\n    at async ListenerCollection.fire (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\listenerCollection.js:157:21)","meta":{"rootId":"kena7jfx8po6kzi","id":"kena7jfx8po6kzi"},"id":"nrraf48kjd0b295","previousOperationId":"ms3ha4lcbh13t5o"}
{"type":"log","timestamp":1705088375504,"level":"warn","message":"Rendering request 2 finished with error in 357 ms","meta":{"rootId":"kena7jfx8po6kzi","id":"kena7jfx8po6kzi"},"id":"idun6ljsofgmz4f","previousOperationId":"ms3ha4lcbh13t5o"}
{"type":"error","timestamp":1705088375506,"statusCode":400,"weak":true,"entity":{"shortid":"LWX1OfaBwy","name":"AveragePunctuation-script","content":"// server side script fetching remote data and preparing report data source\nconst axios = require('axios');\nconst jwt = require('jsonwebtoken');\n\nfunction getOptions(token) {\n    let bearerAccess = 'Bearer ' + token;\n\n    let options = {\n        headers: {\n            'Authorization': bearerAccess,\n        }\n    }\n    return options;\n}\n\n// call remote http rest api\nasync function fetchPunctuationsOfUsers(token) {\n    return new Promise((resolve, reject) => {\n        axios.get('http://localhost:12080/api/cases', getOptions(token)).then(response => {\n            resolve(response.data)\n        }).catch(err => {\n            reject(err.message);\n        })\n    })\n}\n\nasync function fetchUserActivities(token, params){\n    return new Promise((resolve, reject) => {\n        axios.get(`http://localhost:12080/api/exercisesinagroup/${params.groupId}/${params.workUnitId}`, getOptions(token)).then(response => {\n            resolve(response.data)\n        }).catch(err => {\n            reject(err.message);\n        })\n    })\n}\n\nasync function beforeRender(req, res) {\n    const token = req.data.token;\n    req.data.user = jwt.decode(token);\n    req.data.cases = await fetchPunctuationsOfUsers(token);\n    req.data.userActivities = await fetchUserActivities(token, req.data.params);\n}"},"property":"content","logged":true,"previousOperationId":"ms3ha4lcbh13t5o","id":"u1op3rpj5h8ebfg","stack":"Error: Request failed with status code 404\n    at normalizeError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\normalizeError.js:24:18)\n    at handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:207:18)\n    at context.__handleError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:33:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async run (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:195:14)\n    at async executeScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\executeScript.js:122:12)\n    at async Scripts._runScript (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:140:30)\n    at async Scripts.handleBeforeRender (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-scripts\\lib\\worker.js:64:7)\n    at async ListenerCollection.fire (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\listenerCollection.js:157:21)","message":"Error when evaluating custom script /templates/AveragePunctuations/AveragePunctuation-script\nRequest failed with status code 404"}
