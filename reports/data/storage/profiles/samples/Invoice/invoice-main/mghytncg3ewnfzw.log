{"type":"operationStart","subtype":"profile","data":{"_id":"pbsa6wlJCYmDpPuv","timestamp":"2024-01-11T11:27:31.408Z","state":"queued","mode":"standard","creationDate":"2024-01-11T11:27:31.409Z","modificationDate":"2024-01-11T11:27:31.409Z","shortid":"I1ZjNCY","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704972451409,"id":"tsmdlnhhi64ob97","previousOperationId":null,"operationId":"3ecot9r65gxjeld"}
{"type":"log","level":"info","message":"Render request 20 queued for execution and waiting for available worker","previousOperationId":"3ecot9r65gxjeld","timestamp":1704972451409,"id":"iqz2fyj7pzpav7a"}
{"type":"operationStart","subtype":"render","name":"invoice-main","previousOperationId":"3ecot9r65gxjeld","timestamp":1704972451414,"id":"o1twjki7w8nu5fr","previousEventId":"tsmdlnhhi64ob97","operationId":"4p9ymm05kc6vzs4"}
{"type":"log","timestamp":1704972451414,"level":"info","message":"Starting rendering request 20","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"8psuz02artqle1c","previousOperationId":"4p9ymm05kc6vzs4"}
{"type":"log","timestamp":1704972451414,"level":"info","message":"Rendering template { name: invoice-main, recipe: chrome-pdf, engine: handlebars, preview: false }","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"9jv17gndz3h43la","previousOperationId":"4p9ymm05kc6vzs4"}
{"type":"log","timestamp":1704972451415,"level":"debug","message":"Inline data specified.","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"edah7e44je0fjcy","previousOperationId":"4p9ymm05kc6vzs4"}
{"type":"log","timestamp":1704972451416,"level":"debug","message":"Base url not specified, skipping its injection.","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"lebw12ermovxuj9","previousOperationId":"4p9ymm05kc6vzs4"}
{"type":"operationStart","subtype":"engine","name":"handlebars","timestamp":1704972451417,"id":"gbwkwk255muwjs2","previousEventId":"o1twjki7w8nu5fr","operationId":"grtrjssfn2nrfal","previousOperationId":"4p9ymm05kc6vzs4"}
{"type":"log","timestamp":1704972451417,"level":"debug","message":"Rendering engine handlebars","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"5bv7ec7xpdg2j18","previousOperationId":"grtrjssfn2nrfal"}
{"type":"log","timestamp":1704972451426,"level":"warn","message":"Error when processing render request 20\n(because) error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) \"total\" helper call failed\n(because) cannot read properties of undefined (reading 'forEach')\n\n(sandbox.js line 9:11)\n\n   7 | function total(items) {\n   8 |     var sum = 0\n>  9 |     items.forEach(function (i) {\n     |           ^\n  10 |         console.log('Calculating item ' + i.name + '; you should see this message in debug run')\n  11 |         sum += i.price\n  12 |     })\n\n\nTypeError: Cannot read properties of undefined (reading 'forEach')\n    at Object.total (sandbox.js:9:11)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:23)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:347:27)\n    at Object.wrapper (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:51:100)\n    at main (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\n    at Object.execute (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:27:43)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:222:40)\nwrapped by:\nError: \"total\" helper call failed\n(because) cannot read properties of undefined (reading 'forEach')\n    at module.exports (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:364:54)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:370:15)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:347:27)\n    at Object.wrapper (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:51:100)\n    at main (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) \"total\" helper call failed\n(because) cannot read properties of undefined (reading 'forEach')\n    at module.exports (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:310:33)\n    at async engine.engine (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n    at async WorkerReporter._render (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:142:7)\n    at async C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"wiqwqcqsfchakny","previousOperationId":"grtrjssfn2nrfal"}
{"type":"log","timestamp":1704972451426,"level":"warn","message":"Rendering request 20 finished with error in 18 ms","meta":{"rootId":"mghytncg3ewnfzw","id":"mghytncg3ewnfzw"},"id":"ef5vsqrpsgecpt0","previousOperationId":"grtrjssfn2nrfal"}
{"type":"error","timestamp":1704972451427,"entity":{"shortid":"rkJTnK2ce","name":"invoice-main","content":"<!--\nInvoice dynamically rendered into html using handlebars and converted into pdf\nusing chrome-pdf recipe. The styles are extracted into separate asset for\nbetter readability and later reuse.\n\nData to this sample are mocked at the design time and should be filled on the\nincoming API request.\n!-->\n\n<html>\n    <head>\n        <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\n        <style>\n            {{asset \"invoice-styles.css\" \"utf8\"}}\n        </style>\n    </head>\n    <body>\n        <div class=\"invoice-box\">\n            <h1>\n                {{user}}\n            </h1>\n            <table cellpadding=\"0\" cellspacing=\"0\">\n                <tr class=\"top\">\n                    <td colspan=\"2\">\n                        <table>\n                            <tr>\n                                <td class=\"title\">\n                                    <img src=\"{{asset \"invoice-logo.png\" \"dataURI\"}}\" style=\"width:100%; max-width:300px;\" />\n                                </td>\n                                <td>\n                                    Invoice #: {{number}}\n                                    <br> Created: {{nowLocalStr}}\n                                    <br> Due: {{nowPlus20Days}}\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n                <tr class=\"information\">\n                    <td colspan=\"2 \">\n                        <table>\n                            <tr>\n                                <td>\n                                    {{seller.name}}<br>\n                                    {{seller.road}}<br>\n                                    {{seller.country}}\n                                </td>\n                                <td>\n                                    {{buyer.name}}<br>\n                                    {{buyer.road}}<br>\n                                    {{buyer.country}}\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n                <tr class=\"heading\">\n                    <td>\n                        Item\n                    </td>\n                    <td>\n                        Price\n                    </td>\n                </tr>\n                {{#each items}}\n                <tr class=\"item\">\n                    <td>\n                        {{name}}\n                    </td>\n                    <td>\n                        $ {{price}}\n                    </td>\n                </tr>\n                {{/each}}\n                <tr class=\"total\">\n                    <td></td>\n                    <td>\n                        Total: ${{total items}}\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </body>\n</html>\n"},"lineNumber":9,"property":"helpers","statusCode":400,"weak":true,"logged":true,"previousOperationId":"grtrjssfn2nrfal","id":"pulzs3vulgyv222","stack":"TypeError: Cannot read properties of undefined (reading 'forEach')\n    at Object.total (sandbox.js:9:11)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:368:23)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:347:27)\n    at Object.wrapper (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:51:100)\n    at main (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\n    at Object.execute (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\worker.js:27:43)\n    at executionFn (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:222:40)\nwrapped by:\nError: \"total\" helper call failed\n(because) cannot read properties of undefined (reading 'forEach')\n    at module.exports (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at getEnhancedHelperError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:364:54)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:370:15)\n    at Object.<anonymous> (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:347:27)\n    at Object.wrapper (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\internal\\wrapHelper.js:15:19)\n    at Object.main (eval at compile (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:35:30), <anonymous>:51:100)\n    at main (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:208:32)\n    at ret (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\handlebars\\dist\\cjs\\handlebars\\runtime.js:212:12)\n    at Object.execute (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-handlebars\\lib\\handlebarsEngine.js:80:14)\nwrapped by:\nError: Error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) \"total\" helper call failed\n(because) cannot read properties of undefined (reading 'forEach')\n    at module.exports (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\createError.js:10:13)\n    at WorkerReporter.createError (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\shared\\reporter.js:49:12)\n    at executeEngine (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:310:33)\n    at async engine.engine (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\executeEngine.js:115:14)\n    at async invokeRender (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:61:23)\n    at async WorkerReporter._render (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\render\\render.js:142:7)\n    at async C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\reporter.js:224:19\n    at async processAndResponse (C:\\Users\\Javier\\Desktop\\Proyecto\\proyectoNeonatos\\reports\\node_modules\\@jsreport\\advanced-workers\\lib\\workerHandler.js:41:17)","message":"Error when evaluating engine handlebars for template /samples/Invoice/invoice-main\n(because) \"total\" helper call failed\n(because) cannot read properties of undefined (reading 'forEach')\n\n(sandbox.js line 9:11)\n\n   7 | function total(items) {\n   8 |     var sum = 0\n>  9 |     items.forEach(function (i) {\n     |           ^\n  10 |         console.log('Calculating item ' + i.name + '; you should see this message in debug run')\n  11 |         sum += i.price\n  12 |     })\n\n"}
